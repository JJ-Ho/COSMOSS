function GUI = GUI_Plot_Modes(fig)
%% Add base layout
MainLayout = uix.VBoxFlex(...
    'Parent',fig,...
    'Spacing',1,...
    'Padding',5);

ModeListPanel = uix.BoxPanel( ...
    'Parent',MainLayout,...
    'Title','Mode List','FontSize',14);

PlotPanel = uix.BoxPanel( ...
    'Parent',MainLayout,...
    'Title','Plotting selection','FontSize',14);

% buttom
uicontrol('Parent', MainLayout, ...
          'String', 'Plot selected modes',...
          'fontunits', 'point', 'fontsize', 14,...
          'Callback',@(hObject,eventdata)Plot_Modes('Update_Figure',hObject,eventdata,guidata(hObject)));

uicontrol('Parent', MainLayout, ...
          'String', 'Export handles',...
          'fontunits', 'point', 'fontsize', 14,...
          'Callback',@(hObject,eventdata)Plot_Modes('Export_Handle_Callback',hObject,eventdata,guidata(hObject)));

      
set(MainLayout,'Heights',[-1,80,30,30])

%% ModeListPanel
ModeList = [0,0,0];
cnames = {'Freq.','Mu Int','Alpha ZZ'};

hT = uitable('Parent', ModeListPanel, ...
             'Data', ModeList,...
             'ColumnName',cnames,...
             'tag','ModeList',...
             'CellSelectionCallback',@(hObject,eventdata)Plot_Modes('uitable1_CellSelectionCallback',hObject,eventdata,guidata(hObject)));

%% PlotPanel
PlotPanelLayout = uix.VBox('Parent',PlotPanel,...
                           'Padding', 3, 'Spacing', 3);

    IndexBox = uix.HBox('Parent',PlotPanelLayout,...
                        'Padding', 1, 'Spacing', 1);
        uicontrol('Parent',IndexBox,...
                  'Style','text',...
                  'String','Mode indexes:',...
                  'HorizontalAlignment','left',...
                  'units', 'normalized',...
                  'fontunits', 'point', 'fontsize', 14);

        uicontrol('Parent',IndexBox,...
                  'Style','edit',...
                  'Tag','Mode_Ind',...
                  'String','',...
                  'HorizontalAlignment','left',...
                  'units', 'normalized',...
                  'fontunits', 'point', 'fontsize', 14);
    set(IndexBox,'Widths',[100,-1])
        
    ModeTypeBox = uix.HBox('Parent',PlotPanelLayout,...
                           'Padding', 1, 'Spacing', 1);
        uicontrol('Parent',ModeTypeBox,...
                  'Style','text',...
                  'String','Mode type:',...
                  'HorizontalAlignment','left',...
                  'units', 'normalized',...
                  'fontunits', 'point', 'fontsize', 14);
              
        uicontrol('Parent',ModeTypeBox,...
                  'Style','popup',...
                  'String',{'Local Mode','Exciton Mode'},...
                  'tag','Mode_Type',...
                  'HorizontalAlignment','left',...
                  'units', 'normalized',...
                  'fontunits', 'point', 'fontsize', 14);
      set(ModeTypeBox,'Widths',[100,-1])
          
set(PlotPanelLayout,'Heights',[-1,-1])
    
%% output handles
GUI = guihandles(fig);